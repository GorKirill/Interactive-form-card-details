const formCardDetails=document.forms.card_details,cardholderName=formCardDetails.cardholder_name,cardNumber=formCardDetails.card_number,cardMonth=formCardDetails.card_month,cardYear=formCardDetails.card_year,cardCvc=formCardDetails.card_cvc,btnConfirm=formCardDetails.btn_confirm,placeholderCardholderName=cardholderName.placeholder,placeholderCardNumber=cardNumber.placeholder,placeholderCardMonth=cardMonth.placeholder,placeholderCardYear=cardYear.placeholder,placeholderCardCvc=cardCvc.placeholder,maskCardholderName=/^[a-zA-Z]+\s[a-zA-Z]+$/,maskCardNumber=/^(?:1[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,regExCardholderName=/^\D+$/,regExCardNumber=/^[\d]+$/,regExCardMonth=/^\d{1,2}$/,regExCardYear=/^[\d]{2}$/,regExCardCvc=/^[\d]{3}$/,textErrorCardholderName=document.querySelector(".error-cardholder_name"),textErrorCardNumber=document.querySelector(".error-card_number"),textErrorCardMonth=document.querySelector(".error-card_month"),textErrorCardYear=document.querySelector(".error-card_year"),textErrorCardCvc=document.querySelector(".error-card_cvc");cardholderName.addEventListener("input",(()=>{const e=document.querySelector(".card-front__name-text");regExCardholderName.test(cardholderName.value)&&(e.textContent=cardholderName.value),regExCardholderName.test(cardholderName.value)||(e.textContent=""),""===cardholderName.value&&(e.textContent="name surname")})),cardNumber.addEventListener("input",(()=>{const e=document.querySelector(".card-front__card-number"),r=Array.from(cardNumber.value);r.splice(4,0," "),r.splice(9,0," "),r.splice(14,0," "),delete r[19],e.textContent=r.join(""),""===cardNumber.value&&(e.textContent="0000 0000 0000 0000")})),cardMonth.addEventListener("input",(()=>{const e=document.querySelector(".card-front__month");if(e.textContent=cardMonth.value,cardMonth.value.length>2){const r=cardMonth.value.substring(0,cardMonth.value.length-1);e.textContent=r}""===cardMonth.value&&(e.textContent="00")})),cardYear.addEventListener("input",(()=>{const e=document.querySelector(".card-front__year");if(e.textContent=cardYear.value,cardYear.value.length>2){const r=cardYear.value.substring(0,cardYear.value.length-1);e.textContent=r}""===cardYear.value&&(e.textContent="00")})),cardCvc.addEventListener("input",(()=>{const e=document.querySelector(".card-back__cvc");if(e.textContent=cardCvc.value,cardCvc.value.length>3){const r=cardCvc.value.substring(0,cardCvc.value.length-1);e.textContent=r}""===cardCvc.value&&(e.textContent="000")})),cardholderName.addEventListener("focus",(()=>{cardholderName.placeholder=""})),cardholderName.addEventListener("blur",(()=>{cardholderName.placeholder=placeholderCardholderName})),cardNumber.addEventListener("focus",(()=>{cardNumber.placeholder=""})),cardNumber.addEventListener("blur",(()=>{cardNumber.placeholder=placeholderCardNumber})),cardMonth.addEventListener("focus",(()=>{cardMonth.placeholder=""})),cardMonth.addEventListener("blur",(()=>{cardMonth.placeholder=placeholderCardMonth})),cardYear.addEventListener("focus",(()=>{cardYear.placeholder=""})),cardYear.addEventListener("blur",(()=>{cardYear.placeholder=placeholderCardYear})),cardCvc.addEventListener("focus",(()=>{cardCvc.placeholder=""})),cardCvc.addEventListener("blur",(()=>{cardCvc.placeholder=placeholderCardCvc})),cardholderName.addEventListener("input",(()=>{regExCardholderName.test(cardholderName.value)||(cardholderName.classList.add("error-active"),textErrorCardholderName.textContent="Only english"),(""===cardholderName.value||maskCardholderName.test(cardholderName.value))&&(cardholderName.classList.remove("error-active"),textErrorCardholderName.textContent="")})),cardNumber.addEventListener("input",(()=>{if(cardNumber.value.length>16){const e=cardNumber.value.substring(0,cardNumber.value.length-1);cardNumber.value=e}regExCardNumber.test(cardNumber.value)||(cardNumber.classList.add("error-active"),textErrorCardNumber.textContent="Only number"),(""===cardNumber.value||maskCardNumber.test(cardNumber.value))&&(cardNumber.classList.remove("error-active"),textErrorCardNumber.textContent="")})),cardMonth.addEventListener("input",(()=>{if(cardMonth.value.length>2){const e=cardMonth.value.substring(0,cardMonth.value.length-1);cardMonth.value=e}regExCardMonth.test(cardMonth.value)&&cardMonth.validity.valid||(cardMonth.classList.add("error-active"),textErrorCardMonth.textContent="Non-existent month"),(""===cardMonth.value||cardMonth.validity.valid)&&(cardMonth.classList.remove("error-active"),textErrorCardMonth.textContent="")})),cardYear.addEventListener("input",(()=>{if(cardYear.value.length>2){const e=cardYear.value.substring(0,cardYear.value.length-1);cardYear.value=e}cardYear.validity.valid||(cardYear.classList.add("error-active"),textErrorCardYear.textContent="Non-existent year"),(""===cardYear.value||cardYear.validity.valid)&&(cardYear.classList.remove("error-active"),textErrorCardYear.textContent="")})),cardCvc.addEventListener("input",(()=>{if(cardCvc.value.length>3){const e=cardCvc.value.substring(0,cardCvc.value.length-1);cardCvc.value=e}cardCvc.validity.valid||(cardCvc.classList.add("error-active"),textErrorCardCvc.textContent="Non-existent cvc"),(""===cardCvc.value||cardCvc.validity.valid)&&(cardCvc.classList.remove("error-active"),textErrorCardCvc.textContent="")})),btnConfirm.addEventListener("click",(e=>{if(maskCardholderName.test(cardholderName.value)||(cardholderName.classList.add("error-active"),textErrorCardholderName.textContent="Invalid format"),maskCardNumber.test(cardNumber.value)||(cardNumber.classList.add("error-active"),textErrorCardNumber.textContent="Invalid format"),regExCardMonth.test(cardMonth.value)&&cardMonth.validity.valid||(cardMonth.classList.add("error-active"),textErrorCardMonth.textContent="Non-existent month"),regExCardYear.test(cardYear.value)&&cardYear.validity.valid||(cardYear.classList.add("error-active"),textErrorCardYear.textContent="Non-existent year"),regExCardCvc.test(cardCvc.value)&&cardCvc.validity.valid||(cardCvc.classList.add("error-active"),textErrorCardCvc.textContent="Non-existent cvc"),maskCardholderName.test(cardholderName.value)&&maskCardNumber.test(cardNumber.value)&&regExCardMonth.test(cardMonth.value)&&cardMonth.validity.valid&&regExCardYear.test(cardYear.value)&&cardYear.validity.valid&&regExCardCvc.test(cardCvc.value)&&cardCvc.validity.valid){formCardDetails.classList.add("inactive");document.querySelector(".success").classList.add("active")}}));